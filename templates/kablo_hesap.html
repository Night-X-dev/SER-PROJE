<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kablo KanalÄ± Hesaplama ve Dizilim AracÄ±</title>
    <!-- jsPDF kÃ¼tÃ¼phanesi -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- jsPDF-AutoTable eklentisi (tablo desteÄŸi iÃ§in) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js"></script>
    <!-- html2canvas kÃ¼tÃ¼phanesi (gÃ¶rselleÅŸtirme ekran gÃ¶rÃ¼ntÃ¼sÃ¼ iÃ§in) -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* Genel SÄ±fÄ±rlamalar ve Font */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto Mono', monospace, Arial, sans-serif; /* Daha teknik bir font */
        }
        
        /* Body Stili */
        body {
            background: #2b2b2b; /* Koyu gri arka plan */
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Ana Konteyner */
        .container {
            width: 100%;
            max-width: 1200px;
            background: #3c3c3c; /* Daha aÃ§Ä±k gri konteyner */
            border-radius: 4px; /* Daha keskin kÃ¶ÅŸeler */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4); /* Daha az belirgin gÃ¶lge */
            overflow: hidden;
            border: 1px solid #4a4a4a;
        }
        
        /* BaÅŸlÄ±k AlanÄ± */
        header {
            background: #1e1e1e; /* Koyu baÅŸlÄ±k Ã§ubuÄŸu */
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #4a4a4a;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #ffffff;
            text-shadow: none; /* GÃ¶lge kaldÄ±rÄ±ldÄ± */
        }
        
        .subtitle {
            font-size: 16px;
            color: #a0c8ff; /* Teknik mavi vurgu */
            font-weight: 300;
        }
        
        /* Ana Ä°Ã§erik BÃ¶lÃ¼mÃ¼ */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
        }
        
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Panel Stili */
        .panel {
            background: #4a4a4a; /* Panel arka planÄ± */
            border-radius: 4px;
            padding: 20px;
            border: 1px solid #5a5a5a;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2); /* Daha az belirgin iÃ§ gÃ¶lge */
        }
        
        .panel-title {
            font-size: 20px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff; /* Teknik mavi Ã§izgi */
            color: #007bff; /* Teknik mavi baÅŸlÄ±k */
            display: flex;
            align-items: center;
        }
        
        .panel-title i {
            margin-right: 10px;
            font-size: 24px;
        }
        
        .input-section {
            margin-bottom: 20px;
        }
        
        .cable-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
            padding: 12px;
            background: #5a5a5a; /* GiriÅŸ kutusu arka planÄ± */
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .cable-inputs:hover {
            background: #6a6a6a;
        }
        
        /* SeÃ§im KutularÄ± ve GiriÅŸ AlanlarÄ± */
        select, input {
            background: #6a6a6a; /* GiriÅŸ arka planÄ± */
            color: #e0e0e0;
            border: 1px solid #7a7a7a;
            border-radius: 2px; /* Daha keskin kÃ¶ÅŸeler */
            padding: 10px;
            outline: none;
            transition: all 0.2s;
        }
        
        select:focus, input:focus {
            border-color: #007bff; /* Vurgu rengi */
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.3);
        }
        
        select {
            flex: 1;
            min-width: 200px;
        }
        
        .cable-count {
            width: 80px;
        }
        
        /* Buton Stilleri */
        .remove-cable {
            background: #dc3545; /* KÄ±rmÄ±zÄ± */
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .remove-cable:hover {
            background: #c82333;
            transform: scale(1.05); /* Hafif bÃ¼yÃ¼tme */
        }
        
        button {
            background: #007bff; /* Teknik mavi */
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: none; /* GÃ¶lge kaldÄ±rÄ±ldÄ± */
        }
        
        button i {
            margin-right: 8px;
        }
        
        button:hover {
            background: #0056b3; /* Koyu mavi */
            transform: none; /* Transform kaldÄ±rÄ±ldÄ± */
            box-shadow: none; /* GÃ¶lge kaldÄ±rÄ±ldÄ± */
        }
        
        button:active {
            transform: none;
        }
        
        #add-cable {
            background: #28a745; /* YeÅŸil */
        }
        
        #add-cable:hover {
            background: #218838;
        }
        
        /* Parametre BÃ¶lÃ¼mÃ¼ */
        .param-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .param-box {
            background: #5a5a5a;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #007bff; /* Vurgu rengi */
        }
        
        .param-box h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #007bff;
        }
        
        /* GÃ¶rselleÅŸtirme AlanÄ± */
        #visualization {
            width: 100%;
            height: 400px;
            background: #ffffff; /* Beyaz arka plan */
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            border: 1px solid #7a7a7a;
            margin-top: 20px;
        }
        
        .channel {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            background: #f0f0f0; /* Kanal iÃ§i aÃ§Ä±k gri */
            border: 2px solid #007bff; /* KalÄ±n teknik mavi kenarlÄ±k */
            box-sizing: border-box;
            border-radius: 2px;
            box-shadow: none; /* GÃ¶lge kaldÄ±rÄ±ldÄ± */
        }
        
        .channel-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, rgba(150, 150, 150, 0.1) 1px, transparent 1px), /* Ã‡ok soluk gri Ä±zgara */
                linear-gradient(to bottom, rgba(150, 150, 150, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .cable {
            position: absolute;
            border-radius: 50%; /* KablolarÄ± yuvarlak yapar */
            opacity: 0.9;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2); /* Daha hafif gÃ¶lge */
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(0, 0, 0, 0.8); /* Kablo iÃ§indeki metin rengi */
            font-size: 9px; /* Daha kÃ¼Ã§Ã¼k font */
            font-weight: bold;
            text-shadow: none; /* Metin gÃ¶lgesi kaldÄ±rÄ±ldÄ± */
            overflow: hidden;
        }
        
        .cable:hover {
            opacity: 1;
            transform: scale(1.05);
            z-index: 100;
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5); /* Vurgu rengiyle parlar */
        }
        
        .cable::after {
            content: none; /* ParlaklÄ±k efekti kaldÄ±rÄ±ldÄ± */
        }
        
        /* SonuÃ§ BÃ¶lÃ¼mÃ¼ */
        .result-section {
            background: #5a5a5a;
            border-radius: 4px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .result-card {
            background: #4a4a4a;
            border-radius: 4px;
            padding: 15px;
            border-left: 4px solid #007bff;
        }
        
        .result-card h3 {
            font-size: 14px;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: #28a745; /* YeÅŸil vurgu */
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .pdf-button {
            background: #dc3545; /* KÄ±rmÄ±zÄ± */
        }
        
        .pdf-button:hover {
            background: #c82333;
        }
        
        /* Mesaj KutularÄ± */
        .message {
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            display: none;
        }
        
        .info-message {
            background: rgba(0, 123, 255, 0.2);
            border-left: 4px solid #007bff;
            color: #a0d2ff;
        }
        
        .warning-message {
            background: rgba(220, 53, 69, 0.2);
            border-left: 4px solid #dc3545;
            color: #ffb8b8;
        }
        
        /* Tablo Stili */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 14px;
        }
        
        th {
            background: #1e1e1e; /* Koyu tablo baÅŸlÄ±ÄŸÄ± */
            color: #007bff;
            text-align: left;
            padding: 12px 15px;
            font-weight: 600;
            border-bottom: 1px solid #5a5a5a;
        }
        
        td {
            padding: 10px 15px;
            border-bottom: 1px solid #5a5a5a;
        }
        
        tr:nth-child(even) {
            background: #4a4a4a; /* Ã‡ift sÄ±ralar iÃ§in farklÄ± arka plan */
        }
        
        .cable-color {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        /* Lejant */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding: 10px;
            background: #4a4a4a;
            border-radius: 4px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 8px;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            border-top: 1px solid #4a4a4a;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* Ã–lÃ§Ã¼ Ã‡izgileri */
        .dimension-label {
            position: absolute;
            background: #3c3c3c; /* Koyu arka plan */
            color: #007bff; /* Teknik mavi metin */
            padding: 2px 8px;
            border-radius: 2px;
            font-size: 11px; /* Daha kÃ¼Ã§Ã¼k font */
            font-weight: bold;
            z-index: 50;
            border: 1px solid #007bff;
        }
        
        .dimension-line {
            position: absolute;
            background: #007bff; /* Teknik mavi Ã§izgi */
            z-index: 40;
        }
        
        .horizontal-line {
            height: 1px; /* Daha ince Ã§izgi */
        }
        
        .vertical-line {
            width: 1px; /* Daha ince Ã§izgi */
        }
        
        .dimension-end {
            position: absolute;
            width: 4px; /* Daha kÃ¼Ã§Ã¼k uÃ§lar */
            height: 4px;
            border: 1px solid #007bff;
            background: #007bff; /* Dolu uÃ§lar */
            z-index: 45;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>KABLO KANALI HESAPLAMA VE DÄ°ZÄ°LÄ°M ARACI</h1>
            <div class="subtitle">Profesyonel Kablo YÃ¶netimi ve BoyutlandÄ±rma Ã‡Ã¶zÃ¼mÃ¼ | Mustafa Ã–ztÃ¼rk</div>
        </header>
        
        <div class="main-content">
            <div class="panel">
                <div class="panel-title">
                    <i>ğŸ“</i> Kablo Bilgileri ve Parametreler
                </div>
                
                <div class="input-section">
                    <div id="cable-inputs-container">
                        <div class="cable-inputs">
                            <select class="cable-type">
                                <option value="">-- Kablo Tipi SeÃ§in --</option>
                                <optgroup label="NYY Kablo">
                                    <option value="3x2.5" data-diameter="12">3x2,5mmÂ² (Ã˜12mm)</option>
                                    <option value="4x2.5" data-diameter="12.6">4x2,5mmÂ² (Ã˜12.6mm)</option>
                                    <option value="4x4" data-diameter="14.8">4x4mmÂ² (Ã˜14.8mm)</option>
                                    <option value="4x6" data-diameter="16">4x6mmÂ² (Ã˜16mm)</option>
                                    <option value="4x10" data-diameter="18">4x10mmÂ² (Ã˜18mm)</option>
                                    <option value="4x16" data-diameter="21.5">4x16mmÂ² (Ã˜21.5mm)</option>
                                    <option value="3x16+10" data-diameter="21.5">3x16+10mmÂ² (Ã˜21.5mm)</option>
                                    <option value="3x25+16" data-diameter="25">3x25+16mmÂ² (Ã˜25mm)</option>
                                    <option value="3x35+16" data-diameter="27">3x35+16mmÂ² (Ã˜27mm)</option>
                                    <option value="3x50+25" data-diameter="31">3x50+25mmÂ² (Ã˜31mm)</option>
                                </optgroup>
                                <optgroup label="YSLY Kablo">
                                    <option value="2x0.75" data-diameter="5.5">2x0,75mmÂ² (Ã˜5.5mm)</option>
                                    <option value="3x0.75" data-diameter="6">3x0,75mmÂ² (Ã˜6mm)</option>
                                    <option value="4x0.75" data-diameter="6.5">4x0,75mmÂ² (Ã˜6.5mm)</option>
                                    <option value="5x0.75" data-diameter="7.3">5x0,75mmÂ² (Ã˜7.3mm)</option>
                                    <option value="6x0.75" data-diameter="7.9">6x0,75mmÂ² (Ã˜7.9mm)</option>
                                    <option value="12x0.75" data-diameter="10.5">12x0,75mmÂ² (Ã˜10.5mm)</option>
                                    <option value="18x0.75" data-diameter="12.3">18x0,75mmÂ² (Ã˜12.3mm)</option>
                                </optgroup>
                                <optgroup label="LIYCY Kablo">
                                    <option value="liyc_2x0.75" data-diameter="5.4">2x0,75mmÂ² (Ã˜5.4mm)</option>
                                    <option value="liyc_4x0.75" data-diameter="6.1">4x0,75mmÂ² (Ã˜6.1mm)</option>
                                    <option value="liyc_8x0.75" data-diameter="8.1">8x0,75mmÂ² (Ã˜8.1mm)</option>
                                    <option value="liyc_12x0.75" data-diameter="9.4">12x0,75mmÂ² (Ã˜9.4mm)</option>
                                </optgroup>
                            </select>
                            <input type="number" class="cable-count" value="1" min="1" max="20" placeholder="Adet">
                            <button class="remove-cable">Ã—</button>
                        </div>
                    </div>
                    <button id="add-cable"><i>+</i> Kablo Ekle</button>
                </div>
                
                <div class="param-section">
                    <div class="param-box">
                        <h3><i>âš™ï¸</i> Doluluk OranÄ±</h3>
                        <input type="number" id="fill-factor" value="40" min="10" max="60" step="5" style="width: 100%;"> %
                    </div>
                    
                    <div class="param-box">
                        <h3><i>ğŸ“</i> Kanal Boyutu</h3>
                        <select id="channel-size" style="width: 100%;">
                            <option value="50x40">50x40 mm</option>
                            <option value="75x40">75x40 mm</option>
                            <option value="100x40">100x40 mm</option>
                            <option value="150x40">150x40 mm</option>
                            <option value="100x60">100x60 mm</option>
                            <option value="150x60">150x60 mm</option>
                            <option value="200x60">200x60 mm</option>
                            <option value="250x60">250x60 mm</option>
                            <option value="300x60">300x60 mm</option>
                        </select>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 10px;">
                    <button id="calculate"><i>ğŸ§®</i> HESAPLA VE DÄ°Z</button>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">
                    <i>ğŸ”</i> SonuÃ§lar ve GÃ¶rselleÅŸtirme
                </div>
                
                <div class="result-section">
                    <div class="result-grid">
                        <div class="result-card">
                            <h3>Gerekli Kanal AlanÄ±</h3>
                            <div class="result-value">-</div>
                        </div>
                        <div class="result-card">
                            <h3>SeÃ§ilen Kanal</h3>
                            <div class="result-value">-</div>
                        </div>
                        <div class="result-card">
                            <h3>Doluluk OranÄ±</h3>
                            <div class="result-value">-</div>
                        </div>
                        <div class="result-card">
                            <h3>Kablo SayÄ±sÄ±</h3>
                            <div class="result-value">-</div>
                        </div>
                    </div>
                    
                    <div id="visualization">
                        <div class="channel">
                            <div class="channel-grid"></div>
                        </div>
                    </div>
                    
                    <div id="info-message" class="message info-message"></div>
                    <div id="warning-message" class="message warning-message"></div>
                    
                    <div class="action-buttons">
                        <button id="export-pdf" class="pdf-button"><i>ğŸ“„</i> PDF RAPOR OLUÅTUR</button>
                        <button id="reset"><i>ğŸ”„</i> SIFIRLA</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="panel" style="margin: 20px;">
            <div class="panel-title">
                <i>ğŸ“Š</i> DetaylÄ± Kablo Listesi
            </div>
            
            <table id="cable-table">
                <thead>
                    <tr>
                        <th>Kablo Tipi</th>
                        <th>Ã‡ap (mm)</th>
                        <th>Adet</th>
                        <th>Toplam Alan (mmÂ²)</th>
                        <th>Renk Kodu</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Kablo listesi buraya eklenecek -->
                </tbody>
            </table>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #007bff;"></div>
                    <span>BÃ¼yÃ¼k Kablolar (>15mm)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #28a745;"></div>
                    <span>Orta Kablolar (8-15mm)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc3545;"></div>
                    <span>KÃ¼Ã§Ã¼k Kablolar (<8mm)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #6f42c1;"></div>
                    <span>Ã–zel Kablolar</span>
                </div>
            </div>
        </div>
        
        <div class="footer">
            Â© SER Elektrik TÃ¼m haklarÄ± saklÄ±dÄ±r. | Mustafa Ã–ztÃ¼rk
        </div>
    </div>

    <script>
        // Kablo veritabanÄ±
        const cableDatabase = {
            "3x2.5": { name: "NYY 3x2,5mmÂ²", diameter: 12, color: "#007bff" }, /* Teknik mavi */
            "4x2.5": { name: "NYY 4x2,5mmÂ²", diameter: 12.6, color: "#007bff" },
            "4x4": { name: "NYY 4x4mmÂ²", diameter: 14.8, color: "#007bff" },
            "4x6": { name: "NYY 4x6mmÂ²", diameter: 16, color: "#007bff" },
            "4x10": { name: "NYY 4x10mmÂ²", diameter: 18, color: "#007bff" },
            "4x16": { name: "NYY 4x16mmÂ²", diameter: 21.5, color: "#007bff" },
            "3x16+10": { name: "NYY 3x16+10mmÂ²", diameter: 21.5, color: "#007bff" },
            "3x25+16": { name: "NYY 3x25+16mmÂ²", diameter: 25, color: "#007bff" },
            "3x35+16": { name: "NYY 3x35+16mmÂ²", diameter: 27, color: "#007bff" },
            "3x50+25": { name: "NYY 3x50+25mmÂ²", diameter: 31, color: "#007bff" },
            
            "2x0.75": { name: "YSLY 2x0,75mmÂ²", diameter: 5.5, color: "#dc3545" }, /* KÄ±rmÄ±zÄ± */
            "3x0.75": { name: "YSLY 3x0,75mmÂ²", diameter: 6, color: "#dc3545" },
            "4x0.75": { name: "YSLY 4x0,75mmÂ²", diameter: 6.5, color: "#dc3545" },
            "5x0.75": { name: "YSLY 5x0,75mmÂ²", diameter: 7.3, color: "#dc3545" },
            "6x0.75": { name: "YSLY 6x0,75mmÂ²", diameter: 7.9, color: "#dc3545" },
            "12x0.75": { name: "YSLY 12x0,75mmÂ²", diameter: 10.5, color: "#28a745" }, /* YeÅŸil */
            "18x0.75": { name: "YSLY 18x0,75mmÂ²", diameter: 12.3, color: "#28a745" },
            
            "liyc_2x0.75": { name: "LIYCY 2x0,75mmÂ²", diameter: 5.4, color: "#6f42c1" }, /* Mor */
            "liyc_4x0.75": { name: "LIYCY 4x0,75mmÂ²", diameter: 6.1, color: "#6f42c1" },
            "liyc_8x0.75": { name: "LIYCY 8x0,75mmÂ²", diameter: 8.1, color: "#6f42c1" },
            "liyc_12x0.75": { name: "LIYCY 12x0,75mmÂ²", diameter: 9.4, color: "#6f42c1" }
        };

        /**
         * KablolarÄ± kanal iÃ§inde fizik kurallarÄ±na (yerÃ§ekimi) uygun ÅŸekilde yerleÅŸtirir.
         * Kablolar, kanalÄ±n en altÄ±ndan baÅŸlayarak, altlarÄ±ndaki diÄŸer kablolarÄ±n veya kanal tabanÄ±nÄ±n Ã¼zerine yerleÅŸir.
         * @param {Array<Object>} cables - YerleÅŸtirilecek kablo nesnelerinin listesi. Her nesne { diameter, color } iÃ§ermelidir.
         * @param {number} channelWidth - KanalÄ±n gerÃ§ek geniÅŸliÄŸi (mm).
         * @param {number} channelHeight - KanalÄ±n gerÃ§ek yÃ¼ksekliÄŸi (mm).
         * @param {number} scale - GÃ¶rselleÅŸtirme iÃ§in kullanÄ±lan Ã¶lÃ§ek faktÃ¶rÃ¼ (piksel/mm).
         */
        function placeCables(cables, channelWidth, channelHeight, scale) {
            const visualization = document.getElementById('visualization');
            const channel = visualization.querySelector('.channel');
            channel.innerHTML = '<div class="channel-grid"></div>'; // IzgarayÄ± sÄ±fÄ±rla

            // Kanal div'inin gerÃ§ek piksel boyutlarÄ±nÄ± al
            const actualChannelWidthPx = channel.clientWidth;
            const actualChannelHeightPx = channel.clientHeight;

            // KablolarÄ± Ã§apa gÃ¶re bÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸe sÄ±rala (daha iyi paketleme iÃ§in)
            cables.sort((a, b) => b.diameter - a.diameter);

            let placedCables = []; // BaÅŸarÄ±lÄ± bir ÅŸekilde yerleÅŸtirilen kablolarÄ±n listesi

            // Her bir kabloyu yerleÅŸtirmeye Ã§alÄ±ÅŸ
            cables.forEach(cable => {
                const r = (cable.diameter * scale) / 2; // Kablonun Ã¶lÃ§eklendirilmiÅŸ yarÄ±Ã§apÄ±
                let bestY = -1; // Kablonun merkezi iÃ§in en iyi Y koordinatÄ± (kanalÄ±n altÄ±ndan Ã¶lÃ§Ã¼lÃ¼r)
                let bestX = -1; // Kablonun merkezi iÃ§in en iyi X koordinatÄ±

                // Kanal geniÅŸliÄŸi boyunca uygun bir yer bulmaya Ã§alÄ±ÅŸ
                for (let x = r; x <= actualChannelWidthPx - r; x += 1) { // 1 piksellik adÄ±mlarla tara
                    let y = r; // Kablonun merkezi iÃ§in baÅŸlangÄ±Ã§ Y pozisyonu (kanalÄ±n tabanÄ±ndan).

                    let stable = false; // Kablonun stabil bir yere oturup oturmadÄ±ÄŸÄ±nÄ± kontrol eder

                    while (!stable && y <= actualChannelHeightPx - r) {
                        stable = true; // VarsayÄ±lan olarak stabil kabul et

                        // Daha Ã¶nce yerleÅŸtirilmiÅŸ tÃ¼m kablolar ile Ã§arpÄ±ÅŸmayÄ± kontrol et
                        for (let placed of placedCables) {
                            const dx = x - placed.x; // X eksenindeki fark
                            const dy = y - placed.y; // Y eksenindeki fark
                            const dist = Math.sqrt(dx * dx + dy * dy); // Merkezler arasÄ± mesafe

                            if (dist < r + placed.r - 0.5) { // Ã‡arpÄ±ÅŸma var, kabloyu yukarÄ± kaydÄ±r
                                y = placed.y + Math.sqrt(Math.max(0, (r + placed.r) ** 2 - dx ** 2));
                                stable = false; // Kablo hala stabil deÄŸil, tekrar kontrol et
                                break; // DiÄŸer yerleÅŸtirilmiÅŸ kablolarÄ± kontrol etmeye gerek yok, pozisyon deÄŸiÅŸti
                            }
                        }
                        // EÄŸer kablonun alt kenarÄ± kanalÄ±n tabanÄ±ndan daha aÅŸaÄŸÄ± dÃ¼ÅŸmeye Ã§alÄ±ÅŸÄ±yorsa, tabana oturt.
                        if (y < r) {
                            y = r;
                            stable = false;
                        }
                    }

                    // EÄŸer kablo kanalÄ±n yÃ¼ksekliÄŸi iÃ§inde kalÄ±yorsa ve bu pozisyon daha iyiyse kaydet
                    if (y + r <= actualChannelHeightPx) {
                        if (bestY === -1 || y < bestY) {
                            bestY = y;
                            bestX = x;
                        }
                    }
                }

                // EÄŸer kablo iÃ§in uygun bir yer bulunduysa, yerleÅŸtirilen kablolar listesine ekle
                if (bestX !== -1) {
                    placedCables.push({
                        x: bestX,
                        y: bestY,
                        r: r,
                        color: cable.color,
                        diameter: cable.diameter // Store original diameter for display
                    });
                }
            });

            // YerleÅŸtirilen kablolarÄ± Ã§iz
            placedCables.forEach(cable => {
                const div = document.createElement('div');
                div.className = 'cable';
                const diameterPx = cable.r * 2; // Ã‡ap = 2 * yarÄ±Ã§ap

                // CSS 'left' ve 'top' deÄŸerleri, kablonun sol Ã¼st kÃ¶ÅŸesinden Ã¶lÃ§Ã¼lÃ¼r.
                // 'cable.x' ve 'cable.y' kablonun merkezidir.
                // 'cable.x - cable.r' sol kenarÄ± verir.
                // 'actualChannelHeightPx - (cable.y + cable.r)' alt kenarÄ± kanalÄ±n tabanÄ±na oturtur.
                let left = cable.x - cable.r;
                let top = actualChannelHeightPx - (cable.y + cable.r);

                // GÃ¶rsel sÄ±nÄ±rlarÄ± iÃ§inde kalmasÄ±nÄ± saÄŸla
                left = Math.max(0, Math.min(actualChannelWidthPx - diameterPx, left));
                top = Math.max(0, Math.min(actualChannelHeightPx - diameterPx, top));

                div.style.width = `${diameterPx}px`;
                div.style.height = `${diameterPx}px`;
                div.style.left = `${left}px`;
                div.style.top = `${top}px`;
                div.style.backgroundColor = cable.color;
                div.textContent = `${(cable.diameter / scale).toFixed(0)}mm`; // GerÃ§ek Ã§apÄ± gÃ¶ster
                channel.appendChild(div);
            });

            // Kalan kablolar iÃ§in uyarÄ±
            const totalRequestedCables = cables.length;
            if (placedCables.length < totalRequestedCables) {
                const warningMessage = document.getElementById('warning-message');
                warningMessage.style.display = 'block';
                warningMessage.textContent = `UyarÄ±: ${totalRequestedCables - placedCables.length} kablo kanala sÄ±ÄŸmadÄ±. Daha bÃ¼yÃ¼k bir kanal seÃ§in.`;
            } else {
                document.getElementById('warning-message').style.display = 'none';
            }

            // Ã–lÃ§Ã¼ Ã§izgileri ekle
            addDimensionLines(channelWidth, channelHeight, scale);
        }
        
        /**
         * KanalÄ±n geniÅŸlik ve yÃ¼kseklik Ã¶lÃ§Ã¼ Ã§izgilerini gÃ¶rselleÅŸtirme alanÄ±na ekler.
         * @param {number} width - KanalÄ±n gerÃ§ek geniÅŸliÄŸi (mm).
         * @param {number} height - KanalÄ±n gerÃ§ek yÃ¼ksekliÄŸi (mm).
         * @param {number} scale - GÃ¶rselleÅŸtirme iÃ§in kullanÄ±lan Ã¶lÃ§ek faktÃ¶rÃ¼ (piksel/mm).
         */
        function addDimensionLines(width, height, scale) {
            const channel = document.querySelector('.channel');
            const offset = 20; // Kanal kenarÄ±ndan uzaklÄ±k
            
            // Ã–nceki Ã¶lÃ§Ã¼ Ã§izgilerini temizle
            channel.querySelectorAll('.dimension-line, .dimension-end, .dimension-label').forEach(el => el.remove());

            // Yatay Ã§izgi (geniÅŸlik)
            const hLine = document.createElement('div');
            hLine.className = 'dimension-line horizontal-line';
            hLine.style.width = `${width * scale}px`;
            hLine.style.top = `-${offset}px`;
            hLine.style.left = '0';
            channel.appendChild(hLine);
            
            // Yatay Ã§izgi uÃ§larÄ±
            const hEnd1 = document.createElement('div');
            hEnd1.className = 'dimension-end';
            hEnd1.style.left = '0';
            hEnd1.style.top = `-${offset}px`;
            channel.appendChild(hEnd1);
            
            const hEnd2 = document.createElement('div');
            hEnd2.className = 'dimension-end';
            hEnd2.style.right = '0';
            hEnd2.style.top = `-${offset}px`;
            channel.appendChild(hEnd2);
            
            // Yatay Ã¶lÃ§Ã¼ etiketi
            const hLabel = document.createElement('div');
            hLabel.className = 'dimension-label';
            hLabel.textContent = `${width} mm`;
            hLabel.style.top = `-${offset + 10}px`;
            hLabel.style.left = '50%';
            hLabel.style.transform = 'translateX(-50%)';
            channel.appendChild(hLabel);
            
            // Dikey Ã§izgi (yÃ¼kseklik)
            const vLine = document.createElement('div');
            vLine.className = 'dimension-line vertical-line';
            vLine.style.height = `${height * scale}px`;
            vLine.style.left = `-${offset}px`;
            vLine.style.top = '0';
            channel.appendChild(vLine);
            
            // Dikey Ã§izgi uÃ§larÄ±
            const vEnd1 = document.createElement('div');
            vEnd1.className = 'dimension-end';
            vEnd1.style.left = `-${offset}px`;
            vEnd1.style.top = '0';
            channel.appendChild(vEnd1);
            
            const vEnd2 = document.createElement('div');
            vEnd2.className = 'dimension-end';
            vEnd2.style.left = `-${offset}px`;
            vEnd2.style.bottom = '0';
            channel.appendChild(vEnd2);
            
            // Dikey Ã¶lÃ§Ã¼ etiketi
            const vLabel = document.createElement('div');
            vLabel.className = 'dimension-label';
            vLabel.textContent = `${height} mm`;
            vLabel.style.left = `-${offset + 10}px`;
            vLabel.style.top = '50%';
            vLabel.style.transform = 'translateY(-50%) rotate(-90deg)';
            channel.appendChild(vLabel);
        }
        
        // Hesaplama fonksiyonu
        function calculate() {
            const cableSelects = document.querySelectorAll('.cable-type');
            const cableCounts = document.querySelectorAll('.cable-count');
            const fillFactor = parseFloat(document.getElementById('fill-factor').value) / 100;
            const channelSize = document.getElementById('channel-size').value.split('x');
            const channelWidth = parseInt(channelSize[0]);
            const channelHeight = parseInt(channelSize[1]);
            
            let cables = [];
            let totalArea = 0;
            let maxCableDiameter = 0;
            let cableCount = 0;
            
            // KablolarÄ± topla
            cableSelects.forEach((select, index) => {
                if (select.value) {
                    const diameter = parseFloat(select.selectedOptions[0].getAttribute('data-diameter'));
                    const count = parseInt(cableCounts[index].value) || 1;
                    const area = Math.PI * Math.pow(diameter/2, 2) * count;
                    
                    cables.push({
                        id: select.value,
                        name: cableDatabase[select.value].name,
                        diameter: diameter,
                        color: cableDatabase[select.value].color,
                        count: count,
                        area: area
                    });
                    
                    totalArea += area;
                    cableCount += count;
                    
                    // En bÃ¼yÃ¼k kablo Ã§apÄ±nÄ± bul
                    if (diameter > maxCableDiameter) {
                        maxCableDiameter = diameter;
                    }
                }
            });
            
            if (cables.length === 0) {
                // Ã–zel bir modal veya mesaj kutusu kullanÄ±n, alert() kullanmayÄ±n
                const warningMessage = document.getElementById('warning-message');
                warningMessage.style.display = 'block';
                warningMessage.textContent = "LÃ¼tfen en az bir kablo tipi seÃ§in!";
                return;
            }
            
            // Gerekli kanal alanÄ±nÄ± hesapla
            const requiredArea = totalArea / fillFactor;
            const actualArea = channelWidth * channelHeight;
            const actualFillFactor = (totalArea / actualArea) * 100;
            
            // SonuÃ§larÄ± gÃ¼ncelle
            document.querySelectorAll('.result-value')[0].textContent = `${Math.ceil(requiredArea)} mmÂ²`;
            document.querySelectorAll('.result-value')[1].textContent = `${channelWidth}x${channelHeight} mm`;
            document.querySelectorAll('.result-value')[2].textContent = `${actualFillFactor.toFixed(1)}%`;
            document.querySelectorAll('.result-value')[3].textContent = cableCount;
            
            // Kablo tablosunu gÃ¼ncelle
            const tableBody = document.querySelector('#cable-table tbody');
            tableBody.innerHTML = '';
            
            cables.forEach(cable => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><span class="cable-color" style="background:${cable.color}"></span> ${cable.name}</td>
                    <td>${cable.diameter}</td>
                    <td>${cable.count}</td>
                    <td>${cable.area.toFixed(2)}</td>
                    <td><span style="color:${cable.color}">${cable.color.toUpperCase()}</span></td>
                `;
                tableBody.appendChild(row);
            });
            
            // KablolarÄ± yerleÅŸtir
            const visualization = document.getElementById('visualization');
            // KanalÄ±n kenar boÅŸluklarÄ±nÄ± hesaba kat
            const channelPadding = 40; // 20px sol + 20px saÄŸ
            const scale = Math.min(
                (visualization.offsetWidth - channelPadding) / channelWidth,
                (visualization.offsetHeight - channelPadding) / channelHeight
            );
            
            // Tek tek kablolarÄ± oluÅŸtur
            let allCables = [];
            cables.forEach(cable => {
                for (let i = 0; i < cable.count; i++) {
                    allCables.push({
                        name: cable.name,
                        diameter: cable.diameter,
                        color: cable.color
                    });
                }
            });
            
            placeCables(allCables, channelWidth, channelHeight, scale);
            
            // Bilgi mesajÄ±
            if (actualFillFactor > fillFactor * 100) {
                const infoMessage = document.getElementById('info-message');
                infoMessage.style.display = 'block';
                infoMessage.textContent = `Dikkat: Doluluk oranÄ± %${(fillFactor*100).toFixed(0)}'den yÃ¼ksek (%${actualFillFactor.toFixed(1)}). Daha bÃ¼yÃ¼k bir kanal seÃ§meniz Ã¶nerilir.`;
            } else {
                document.getElementById('info-message').style.display = 'none';
            }
        }
        
        // PDF iÃ§in TÃ¼rkÃ§e destekli font'u base64 olarak gÃ¶mmeniz lazÄ±m.
        // Ã–rnek: https://github.com/dejavu-fonts/dejavu/blob/master/ttf/DejaVuSans.ttf indirip base64'e Ã§evirin:
        // Linux/Mac: base64 DejaVuSans.ttf | tr -d '\\n' > font.txt
        // ArdÄ±ndan font.txt iÃ§eriÄŸini aÅŸaÄŸÄ±ya yapÄ±ÅŸtÄ±rÄ±n.
        // Ã–NEMLÄ°: Bu deÄŸiÅŸkeni gerÃ§ek Base64 string ile doldurmanÄ±z gerekmektedir.
        // Aksi takdirde, TÃ¼rkÃ§e karakterler dÃ¼zgÃ¼n gÃ¶rÃ¼ntÃ¼lenmeyebilir.
        const turkishFontBase64 = "BURAYA_DEJAVU_SANS_TTF_BASE64_STRING_GELECEK"; // Ã–rnek uzun bir base64 string

        function loadTurkishFont(doc) {
            try {
                if (turkishFontBase64 && !turkishFontBase64.startsWith("BURAYA")) {
                    doc.addFileToVFS("DejaVuSans.ttf", turkishFontBase64);
                    doc.addFont("DejaVuSans.ttf", "DejaVuSans", "normal");
                    doc.setFont("DejaVuSans");
                } else {
                    // Placeholder bÄ±rakÄ±lmÄ±ÅŸsa veya boÅŸsa varsayÄ±lanla devam eder
                    console.warn("Turkish font Base64 string eksik veya hatalÄ±. VarsayÄ±lan 'helvetica' fontu kullanÄ±lacak. TÃ¼rkÃ§e karakterlerde sorun yaÅŸanabilir.");
                    doc.setFont("helvetica");
                }
            } catch (e) {
                console.warn("Font yÃ¼klenirken bir hata oluÅŸtu, varsayÄ±lan font kullanÄ±lacak.", e);
                doc.setFont("helvetica");
            }
        }

        // TÃ¼rkÃ§e karakterleri Ä°ngilizce eÅŸdeÄŸerlerine Ã§eviren yardÄ±mcÄ± fonksiyon
        function convertToEnglishChars(text) {
            if (typeof text !== 'string') return text;
            return text
                .replace(/Ä°/g, 'I')
                .replace(/Ä±/g, 'i')
                .replace(/Ä/g, 'G')
                .replace(/ÄŸ/g, 'g')
                .replace(/Ãœ/g, 'U')
                .replace(/Ã¼/g, 'u')
                .replace(/Å/g, 'S')
                .replace(/ÅŸ/g, 's')
                .replace(/Ã–/g, 'O')
                .replace(/Ã¶/g, 'o')
                .replace(/Ã‡/g, 'C')
                .replace(/Ã§/g, 'c');
        }

        // PDF oluÅŸturma fonksiyonu
        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            loadTurkishFont(doc); // Fontu yÃ¼kle
            
            // BaÅŸlÄ±k
            doc.setFontSize(18);
            doc.setTextColor(30, 50, 80);
            doc.text(convertToEnglishChars('KABLO KANALI HESAP RAPORU'), 105, 20, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text(convertToEnglishChars(`OluÅŸturulma Tarihi: ${new Date().toLocaleDateString('tr-TR')}`), 105, 26, { align: 'center' });
            
            // SonuÃ§lar
            doc.setFontSize(14);
            doc.setTextColor(30, 50, 80);
            doc.text(convertToEnglishChars('Hesaplama SonuÃ§larÄ±'), 20, 35);
            
            doc.setFontSize(10);
            let y = 43; // BaÅŸlangÄ±Ã§ Y pozisyonu
            const results = [
                [`Gerekli Kanal AlanÄ±`, document.querySelectorAll('.result-value')[0].textContent],
                [`SeÃ§ilen Kanal`, document.querySelectorAll('.result-value')[1].textContent],
                [`Doluluk OranÄ±`, document.querySelectorAll('.result-value')[2].textContent],
                [`Toplam Kablo SayÄ±sÄ±`, document.querySelectorAll('.result-value')[3].textContent]
            ];
            
            results.forEach(([label, value]) => {
                doc.setTextColor(0, 0, 0);
                doc.text(convertToEnglishChars(`${label}:`), 25, y);
                doc.setTextColor(0, 123, 255); /* Teknik mavi */
                doc.text(convertToEnglishChars(value), 80, y); // DeÄŸerin baÅŸlangÄ±Ã§ pozisyonunu ayarla
                y += 7; // Her satÄ±r arasÄ±nda daha fazla boÅŸluk
            });
            
            // Kablo listesi
            doc.setFontSize(12);
            doc.setTextColor(30, 50, 80);
            doc.text(convertToEnglishChars('Kablo Listesi'), 20, y + 10); // Tablo baÅŸlÄ±ÄŸÄ± ile sonuÃ§lar arasÄ±na daha fazla boÅŸluk
            
            const headers = ['Kablo Tipi', 'Cap (mm)', 'Adet', 'Alan (mm2)'].map(convertToEnglishChars); // BaÅŸlÄ±klarÄ± da Ã§evir
            const rows = [];
            
            document.querySelectorAll('#cable-table tbody tr').forEach(row => {
                const cells = Array.from(row.querySelectorAll('td')).slice(0, 4);
                rows.push(cells.map(cell => convertToEnglishChars(cell.textContent.trim()))); // HÃ¼cre iÃ§eriklerini de Ã§evir
            });
            
            doc.autoTable({
                startY: y + 14, // Tablonun baÅŸlangÄ±Ã§ Y pozisyonunu ayarla
                head: [headers],
                body: rows,
                theme: 'grid',
                headStyles: { fillColor: [30, 50, 80], textColor: 255 },
                styles: { font: doc.getFont().fontName, fontSize: 9, cellPadding: 2 }, // Fontu ve hÃ¼cre dolgusunu ayarla
                columnStyles: {
                    0: { cellWidth: 60 },
                    1: { cellWidth: 25 },
                    2: { cellWidth: 20 },
                    3: { cellWidth: 30 }
                },
                margin: { left: 15, right: 15 }
            });
            
            // GÃ¶rselleÅŸtirme
            html2canvas(document.getElementById('visualization'), { scale: 2 }).then(canvas => { // scale: 2 eklendi
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 150;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                const pageHeight = doc.internal.pageSize.getHeight();
                
                let imgY = doc.autoTable.previous ? doc.autoTable.previous.finalY + 10 : y + 30; // Tablo sonrasÄ± veya sonuÃ§lar sonrasÄ± konum
                if (imgY + imgHeight > pageHeight - 20) {
                    doc.addPage();
                    imgY = 20;
                }
                
                doc.addImage(imgData, 'PNG', 30, imgY, imgWidth, imgHeight);
                // Dipnot
                doc.setFontSize(8);
                doc.setTextColor(100, 100, 100);
                doc.text(convertToEnglishChars('Â© SER Elektrik TÃ¼m haklarÄ± saklÄ±dÄ±r. | Mustafa Ã–ztÃ¼rk'), 105, 290, { align: 'center' });
                
                // PDF'i indir
                doc.save(`kablo-kanali-raporu-${new Date().toISOString().slice(0, 10)}.pdf`);
            });
        }
        
        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            // Kablo ekleme butonu
            document.getElementById('add-cable').addEventListener('click', function() {
                const container = document.getElementById('cable-inputs-container');
                const div = document.createElement('div');
                div.className = 'cable-inputs';
                div.innerHTML = `
                    <select class="cable-type">
                        <option value="">-- Kablo Tipi SeÃ§in --</option>
                        <optgroup label="NYY Kablo">
                            <option value="3x2.5" data-diameter="12">3x2,5mmÂ² (Ã˜12mm)</option>
                            <option value="4x2.5" data-diameter="12.6">4x2,5mmÂ² (Ã˜12.6mm)</option>
                            <option value="4x4" data-diameter="14.8">4x4mmÂ² (Ã˜14.8mm)</option>
                            <option value="4x6" data-diameter="16">4x6mmÂ² (Ã˜16mm)</option>
                            <option value="4x10" data-diameter="18">4x10mmÂ² (Ã˜18mm)</option>
                            <option value="4x16" data-diameter="21.5">4x16mmÂ² (Ã˜21.5mm)</option>
                            <option value="3x16+10" data-diameter="21.5">3x16+10mmÂ² (Ã˜21.5mm)</option>
                            <option value="3x25+16" data-diameter="25">3x25+16mmÂ² (Ã˜25mm)</option>
                            <option value="3x35+16" data-diameter="27">3x35+16mmÂ² (Ã˜27mm)</option>
                            <option value="3x50+25" data-diameter="31">3x50+25mmÂ² (Ã˜31mm)</option>
                        </optgroup>
                        <optgroup label="YSLY Kablo">
                            <option value="2x0.75" data-diameter="5.5">2x0,75mmÂ² (Ã˜5.5mm)</option>
                            <option value="3x0.75" data-diameter="6">3x0,75mmÂ² (Ã˜6mm)</option>
                            <option value="4x0.75" data-diameter="6.5">4x0,75mmÂ² (Ã˜6.5mm)</option>
                            <option value="5x0.75" data-diameter="7.3">5x0,75mmÂ² (Ã˜7.3mm)</option>
                            <option value="6x0.75" data-diameter="7.9">6x0,75mmÂ² (Ã˜7.9mm)</option>
                            <option value="12x0.75" data-diameter="10.5">12x0,75mmÂ² (Ã˜10.5mm)</option>
                            <option value="18x0.75" data-diameter="12.3">18x0,75mmÂ² (Ã˜12.3mm)</option>
                        </optgroup>
                        <optgroup label="LIYCY Kablo">
                            <option value="liyc_2x0.75" data-diameter="5.4">2x0,75mmÂ² (Ã˜5.4mm)</option>
                            <option value="liyc_4x0.75" data-diameter="6.1">4x0,75mmÂ² (Ã˜6.1mm)</option>
                            <option value="liyc_8x0.75" data-diameter="8.1">8x0,75mmÂ² (Ã˜8.1mm)</option>
                            <option value="liyc_12x0.75" data-diameter="9.4">12x0,75mmÂ² (Ã˜9.4mm)</option>
                        </optgroup>
                    </select>
                    <input type="number" class="cable-count" value="1" min="1" max="20" placeholder="Adet">
                    <button class="remove-cable">Ã—</button>
                `;
                container.appendChild(div);
            });
            
            // Sil butonlarÄ± iÃ§in event delegation
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('remove-cable')) {
                    const inputs = document.querySelectorAll('.cable-inputs');
                    if (inputs.length > 1) {
                        e.target.closest('.cable-inputs').remove();
                    } else {
                        // Ã–zel bir modal veya mesaj kutusu kullanÄ±n, alert() kullanmayÄ±n
                        const warningMessage = document.getElementById('warning-message');
                        warningMessage.style.display = 'block';
                        warningMessage.textContent = "En az bir kablo giriÅŸi olmalÄ±dÄ±r!";
                    }
                }
            });
            
            // Hesapla butonu
            document.getElementById('calculate').addEventListener('click', calculate);
            
            // PDF oluÅŸtur butonu
            document.getElementById('export-pdf').addEventListener('click', exportToPDF);
            
            // SÄ±fÄ±rla butonu
            document.getElementById('reset').addEventListener('click', function() {
                const container = document.getElementById('cable-inputs-container');
                container.innerHTML = '';
                
                // Ä°lk kablo giriÅŸini ekle
                const div = document.createElement('div');
                div.className = 'cable-inputs';
                div.innerHTML = `
                    <select class="cable-type">
                        <option value="">-- Kablo Tipi SeÃ§in --</option>
                        <optgroup label="NYY Kablo">
                            <option value="3x2.5" data-diameter="12">3x2,5mmÂ² (Ã˜12mm)</option>
                            <option value="4x2.5" data-diameter="12.6">4x2,5mmÂ² (Ã˜12.6mm)</option>
                            <option value="4x4" data-diameter="14.8">4x4mmÂ² (Ã˜14.8mm)</option>
                            <option value="4x6" data-diameter="16">4x6mmÂ² (Ã˜16mm)</option>
                            <option value="4x10" data-diameter="18">4x10mmÂ² (Ã˜18mm)</option>
                            <option value="4x16" data-diameter="21.5">4x16mmÂ² (Ã˜21.5mm)</option>
                            <option value="3x16+10" data-diameter="21.5">3x16+10mmÂ² (Ã˜21.5mm)</option>
                            <option value="3x25+16" data-diameter="25">3x25+16mmÂ² (Ã˜25mm)</option>
                            <option value="3x35+16" data-diameter="27">3x35+16mmÂ² (Ã˜27mm)</option>
                            <option value="3x50+25" data-diameter="31">3x50+25mmÂ² (Ã˜31mm)</option>
                        </optgroup>
                        <optgroup label="YSLY Kablo">
                            <option value="2x0.75" data-diameter="5.5">2x0,75mmÂ² (Ã˜5.5mm)</option>
                            <option value="3x0.75" data-diameter="6">3x0,75mmÂ² (Ã˜6mm)</option>
                            <option value="4x0.75" data-diameter="6.5">4x0,75mmÂ² (Ã˜6.5mm)</option>
                            <option value="5x0.75" data-diameter="7.3">5x0,75mmÂ² (Ã˜7.3mm)</option>
                            <option value="6x0.75" data-diameter="7.9">6x0,75mmÂ² (Ã˜7.9mm)</option>
                            <option value="12x0.75" data-diameter="10.5">12x0,75mmÂ² (Ã˜10.5mm)</option>
                            <option value="18x0.75" data-diameter="12.3">18x0,75mmÂ² (Ã˜12.3mm)</option>
                        </optgroup>
                        <optgroup label="LIYCY Kablo">
                            <option value="liyc_2x0.75" data-diameter="5.4">2x0,75mmÂ² (Ã˜5.4mm)</option>
                            <option value="liyc_4x0.75" data-diameter="6.1">4x0,75mmÂ² (Ã˜6.1mm)</option>
                            <option value="liyc_8x0.75" data-diameter="8.1">8x0,75mmÂ² (Ã˜8.1mm)</option>
                            <option value="liyc_12x0.75" data-diameter="9.4">12x0,75mmÂ² (Ã˜9.4mm)</option>
                        </optgroup>
                    </select>
                    <input type="number" class="cable-count" value="1" min="1" max="20" placeholder="Adet">
                    <button class="remove-cable">Ã—</button>
                `;
                container.appendChild(div);
                
                // DiÄŸer alanlarÄ± sÄ±fÄ±rla
                document.getElementById('fill-factor').value = 40;
                document.getElementById('channel-size').value = '100x40';
                
                // SonuÃ§larÄ± sÄ±fÄ±rla
                document.querySelectorAll('.result-value').forEach(el => {
                    el.textContent = '-';
                });
                
                // Tabloyu sÄ±fÄ±rla
                document.querySelector('#cable-table tbody').innerHTML = '';
                
                // MesajlarÄ± kaldÄ±r
                document.getElementById('info-message').style.display = 'none';
                document.getElementById('warning-message').style.display = 'none';
                
                // GÃ¶rselleÅŸtirmeyi sÄ±fÄ±rla
                const channel = document.querySelector('.channel');
                channel.innerHTML = '<div class="channel-grid"></div>';
            });
        });
    </script>
</body>
</html>
