<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kablo Kanalƒ± Hesaplama ve Dizilim Aracƒ±</title>
    <!-- jsPDF k√ºt√ºphanesi -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- jsPDF-AutoTable eklentisi (tablo desteƒüi i√ßin) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js"></script>
    <!-- html2canvas k√ºt√ºphanesi (g√∂rselle≈ütirme ekran g√∂r√ºnt√ºs√º i√ßin) -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* Genel Sƒ±fƒ±rlamalar ve Font */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto Mono', monospace, Arial, sans-serif; /* Daha teknik bir font */
        }
        
        /* Body Stili */
        body {
            background: #2b2b2b; /* Koyu gri arka plan */
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* Ana Konteyner */
        .container {
            width: 100%;
            max-width: 1200px;
            background: #3c3c3c; /* Daha a√ßƒ±k gri konteyner */
            border-radius: 4px; /* Daha keskin k√∂≈üeler */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4); /* Daha az belirgin g√∂lge */
            overflow: hidden;
            border: 1px solid #4a4a4a;
        }
        
        /* Ba≈ülƒ±k Alanƒ± */
        header {
            background: #1e1e1e; /* Koyu ba≈ülƒ±k √ßubuƒüu */
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #4a4a4a;
        }
        
        h1 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #ffffff;
            text-shadow: none; /* G√∂lge kaldƒ±rƒ±ldƒ± */
        }
        
        .subtitle {
            font-size: 16px;
            color: #a0c8ff; /* Teknik mavi vurgu */
            font-weight: 300;
        }
        
        /* Ana ƒ∞√ßerik B√∂l√ºm√º */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
        }
        
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Panel Stili */
        .panel {
            background: #4a4a4a; /* Panel arka planƒ± */
            border-radius: 4px;
            padding: 20px;
            border: 1px solid #5a5a5a;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2); /* Daha az belirgin i√ß g√∂lge */
        }
        
        .panel-title {
            font-size: 20px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff; /* Teknik mavi √ßizgi */
            color: #007bff; /* Teknik mavi ba≈ülƒ±k */
            display: flex;
            align-items: center;
        }
        
        .panel-title i {
            margin-right: 10px;
            font-size: 24px;
        }
        
        .input-section {
            margin-bottom: 20px;
        }
        
        .cable-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
            padding: 12px;
            background: #5a5a5a; /* Giri≈ü kutusu arka planƒ± */
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .cable-inputs:hover {
            background: #6a6a6a;
        }
        
        /* Se√ßim Kutularƒ± ve Giri≈ü Alanlarƒ± */
        select, input {
            background: #6a6a6a; /* Giri≈ü arka planƒ± */
            color: #e0e0e0;
            border: 1px solid #7a7a7a;
            border-radius: 2px; /* Daha keskin k√∂≈üeler */
            padding: 10px;
            outline: none;
            transition: all 0.2s;
        }
        
        select:focus, input:focus {
            border-color: #007bff; /* Vurgu rengi */
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.3);
        }
        
        select {
            flex: 1;
            min-width: 200px;
        }
        
        .cable-count {
            width: 80px;
        }
        
        /* Buton Stilleri */
        .remove-cable {
            background: #dc3545; /* Kƒ±rmƒ±zƒ± */
            color: white;
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .remove-cable:hover {
            background: #c82333;
            transform: scale(1.05); /* Hafif b√ºy√ºtme */
        }
        
        button {
            background: #007bff; /* Teknik mavi */
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: none; /* G√∂lge kaldƒ±rƒ±ldƒ± */
        }
        
        button i {
            margin-right: 8px;
        }
        
        button:hover {
            background: #0056b3; /* Koyu mavi */
            transform: none; /* Transform kaldƒ±rƒ±ldƒ± */
            box-shadow: none; /* G√∂lge kaldƒ±rƒ±ldƒ± */
        }
        
        button:active {
            transform: none;
        }
        
        #add-cable {
            background: #28a745; /* Ye≈üil */
        }
        
        #add-cable:hover {
            background: #218838;
        }
        
        /* Parametre B√∂l√ºm√º */
        .param-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .param-box {
            background: #5a5a5a;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #007bff; /* Vurgu rengi */
        }
        
        .param-box h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #007bff;
        }
        
        /* G√∂rselle≈ütirme Alanƒ± */
        #visualization {
            width: 100%;
            height: 400px;
            background: #ffffff; /* Beyaz arka plan */
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            border: 1px solid #7a7a7a;
            margin-top: 20px;
        }
        
        .channel {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            background: #f0f0f0; /* Kanal i√ßi a√ßƒ±k gri */
            border: 2px solid #007bff; /* Kalƒ±n teknik mavi kenarlƒ±k */
            box-sizing: border-box;
            border-radius: 2px;
            box-shadow: none; /* G√∂lge kaldƒ±rƒ±ldƒ± */
        }
        
        .channel-grid {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(to right, rgba(150, 150, 150, 0.1) 1px, transparent 1px), /* √áok soluk gri ƒ±zgara */
                linear-gradient(to bottom, rgba(150, 150, 150, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .cable {
            position: absolute;
            border-radius: 50%; /* Kablolarƒ± yuvarlak yapar */
            opacity: 0.9;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2); /* Daha hafif g√∂lge */
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(0, 0, 0, 0.8); /* Kablo i√ßindeki metin rengi */
            font-size: 9px; /* Daha k√º√ß√ºk font */
            font-weight: bold;
            text-shadow: none; /* Metin g√∂lgesi kaldƒ±rƒ±ldƒ± */
            overflow: hidden;
        }
        
        .cable:hover {
            opacity: 1;
            transform: scale(1.05);
            z-index: 100;
            box-shadow: 0 0 10px rgba(0, 123, 255, 0.5); /* Vurgu rengiyle parlar */
        }
        
        .cable::after {
            content: none; /* Parlaklƒ±k efekti kaldƒ±rƒ±ldƒ± */
        }
        
        /* Sonu√ß B√∂l√ºm√º */
        .result-section {
            background: #5a5a5a;
            border-radius: 4px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .result-card {
            background: #4a4a4a;
            border-radius: 4px;
            padding: 15px;
            border-left: 4px solid #007bff;
        }
        
        .result-card h3 {
            font-size: 14px;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .result-value {
            font-size: 24px;
            font-weight: 700;
            color: #28a745; /* Ye≈üil vurgu */
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .pdf-button {
            background: #dc3545; /* Kƒ±rmƒ±zƒ± */
        }
        
        .pdf-button:hover {
            background: #c82333;
        }
        
        /* Mesaj Kutularƒ± */
        .message {
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            display: none;
        }
        
        .info-message {
            background: rgba(0, 123, 255, 0.2);
            border-left: 4px solid #007bff;
            color: #a0d2ff;
        }
        
        .warning-message {
            background: rgba(220, 53, 69, 0.2);
            border-left: 4px solid #dc3545;
            color: #ffb8b8;
        }
        
        /* Tablo Stili */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 14px;
        }
        
        th {
            background: #1e1e1e; /* Koyu tablo ba≈ülƒ±ƒüƒ± */
            color: #007bff;
            text-align: left;
            padding: 12px 15px;
            font-weight: 600;
            border-bottom: 1px solid #5a5a5a;
        }
        
        td {
            padding: 10px 15px;
            border-bottom: 1px solid #5a5a5a;
        }
        
        tr:nth-child(even) {
            background: #4a4a4a; /* √áift sƒ±ralar i√ßin farklƒ± arka plan */
        }
        
        .cable-color {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        /* Lejant */
        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding: 10px;
            background: #4a4a4a;
            border-radius: 4px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            font-size: 12px;
        }
        
        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 8px;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            border-top: 1px solid #4a4a4a;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* √ñl√ß√º √áizgileri */
        .dimension-label {
            position: absolute;
            background: #3c3c3c; /* Koyu arka plan */
            color: #007bff; /* Teknik mavi metin */
            padding: 2px 8px;
            border-radius: 2px;
            font-size: 11px; /* Daha k√º√ß√ºk font */
            font-weight: bold;
            z-index: 50;
            border: 1px solid #007bff;
        }
        
        .dimension-line {
            position: absolute;
            background: #007bff; /* Teknik mavi √ßizgi */
            z-index: 40;
        }
        
        .horizontal-line {
            height: 1px; /* Daha ince √ßizgi */
        }
        
        .vertical-line {
            width: 1px; /* Daha ince √ßizgi */
        }
        
        .dimension-end {
            position: absolute;
            width: 4px; /* Daha k√º√ß√ºk u√ßlar */
            height: 4px;
            border: 1px solid #007bff;
            background: #007bff; /* Dolu u√ßlar */
            z-index: 45;
        }

        /* Mobile Responsive ƒ∞yile≈ütirmeleri */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                align-items: flex-start;
            }
            
            h1 {
                font-size: 22px;
            }
            
            .subtitle {
                font-size: 14px;
            }
            
            .panel {
                padding: 15px;
            }
            
            .panel-title {
                font-size: 18px;
            }
            
            .cable-inputs {
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
            }
            
            .cable-inputs select, 
            .cable-inputs input {
                width: 100%;
                min-width: unset;
            }
            
            .param-section {
                grid-template-columns: 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .result-card h3 {
                font-size: 13px;
            }
            
            .result-value {
                font-size: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .action-buttons button {
                width: 100%;
            }
            
            #visualization {
                height: 300px;
            }
            
            .legend {
                flex-direction: column;
                gap: 8px;
            }
            
            /* Tablo i√ßin mobil uyumluluk */
            .table-container {
                overflow-x: auto;
            }
            
            table {
                min-width: 600px;
            }
            
            .footer {
                padding: 15px;
                font-size: 12px;
            }
        }
        
        @media (max-width: 480px) {
            .main-content {
                padding: 15px;
                gap: 15px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
            
            #visualization {
                height: 250px;
            }
            
            .action-buttons button {
                padding: 10px 15px;
                font-size: 14px;
            }
        }
        
        /* ƒ∞yile≈ütirmeler */
        .mobile-menu-btn {
            display: none;
            background: #007bff;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            width: 100%;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
        }
        
        @media (max-width: 900px) {
            .mobile-menu-btn {
                display: block;
            }
            
            .panel {
                margin-bottom: 15px;
            }
        }
        
        /* Kablo tipi se√ßimi i√ßin daha belirgin etiketler */
        .cable-type-label {
            font-size: 14px;
            margin-bottom: 5px;
            display: block;
            color: #a0c8ff;
        }
        
        /* Hesapla butonu i√ßin mobil d√ºzenleme */
        #calculate {
            width: 100%;
            padding: 15px;
            font-size: 18px;
        }
        
        /* Sƒ±fƒ±rla butonu i√ßin farklƒ± renk */
        #reset {
            background: #6c757d;
        }
        
        #reset:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>KABLO KANALI HESAPLAMA VE Dƒ∞Zƒ∞Lƒ∞M ARACI</h1>
            <div class="subtitle">Profesyonel Kablo Y√∂netimi ve Boyutlandƒ±rma √á√∂z√ºm√º | SER Elektrik Otomasyon</div>
        </header>
        
        <div class="main-content">
            <div class="panel">
                <div class="panel-title">
                    <i>üìê</i> Kablo Bilgileri ve Parametreler
                </div>
                
                <div class="input-section">
                    <div id="cable-inputs-container">
                        <div class="cable-inputs">
                            <label class="cable-type-label">Kablo Tipi:</label>
                            <select class="cable-type">
                                <option value="">-- Kablo Tipi Se√ßin --</option>
                                <optgroup label="NYY Kablo">
                                    <option value="3x2.5" data-diameter="12">3x2,5mm¬≤ (√ò12mm)</option>
                                    <option value="4x2.5" data-diameter="12.6">4x2,5mm¬≤ (√ò12.6mm)</option>
                                    <option value="4x4" data-diameter="14.8">4x4mm¬≤ (√ò14.8mm)</option>
                                    <option value="4x6" data-diameter="16">4x6mm¬≤ (√ò16mm)</option>
                                    <option value="4x10" data-diameter="18">4x10mm¬≤ (√ò18mm)</option>
                                    <option value="4x16" data-diameter="21.5">4x16mm¬≤ (√ò21.5mm)</option>
                                    <option value="3x16+10" data-diameter="21.5">3x16+10mm¬≤ (√ò21.5mm)</option>
                                    <option value="3x25+16" data-diameter="25">3x25+16mm¬≤ (√ò25mm)</option>
                                    <option value="3x35+16" data-diameter="27">3x35+16mm¬≤ (√ò27mm)</option>
                                    <option value="3x50+25" data-diameter="31">3x50+25mm¬≤ (√ò31mm)</option>
                                </optgroup>
                                <optgroup label="YSLY Kablo">
                                    <option value="2x0.75" data-diameter="5.5">2x0,75mm¬≤ (√ò5.5mm)</option>
                                    <option value="3x0.75" data-diameter="6">3x0,75mm¬≤ (√ò6mm)</option>
                                    <option value="4x0.75" data-diameter="6.5">4x0,75mm¬≤ (√ò6.5mm)</option>
                                    <option value="5x0.75" data-diameter="7.3">5x0,75mm¬≤ (√ò7.3mm)</option>
                                    <option value="6x0.75" data-diameter="7.9">6x0,75mm¬≤ (√ò7.9mm)</option>
                                    <option value="12x0.75" data-diameter="10.5">12x0,75mm¬≤ (√ò10.5mm)</option>
                                    <option value="18x0.75" data-diameter="12.3">18x0,75mm¬≤ (√ò12.3mm)</option>
                                </optgroup>
                                <optgroup label="LIYCY Kablo">
                                    <option value="liyc_2x0.75" data-diameter="5.4">2x0,75mm¬≤ (√ò5.4mm)</option>
                                    <option value="liyc_4x0.75" data-diameter="6.1">4x0,75mm¬≤ (√ò6.1mm)</option>
                                    <option value="liyc_8x0.75" data-diameter="8.1">8x0,75mm¬≤ (√ò8.1mm)</option>
                                    <option value="liyc_12x0.75" data-diameter="9.4">12x0,75mm¬≤ (√ò9.4mm)</option>
                                </optgroup>
                            </select>
                            
                            <label class="cable-type-label">Adet:</label>
                            <input type="number" class="cable-count" value="1" min="1" max="20" placeholder="Adet">
                            
                            <button class="remove-cable">√ó</button>
                        </div>
                    </div>
                    <button id="add-cable"><i>+</i> Kablo Ekle</button>
                </div>
                
                <div class="param-section">
                    <div class="param-box">
                        <h3><i>‚öôÔ∏è</i> Doluluk Oranƒ±</h3>
                        <input type="number" id="fill-factor" value="40" min="10" max="60" step="5" style="width: 100%;"> %
                    </div>
                    
                    <div class="param-box">
                        <h3><i>üìè</i> Kanal Boyutu</h3>
                        <select id="channel-size" style="width: 100%;">
                            <option value="50x40">50x40 mm</option>
                            <option value="75x40">75x40 mm</option>
                            <option value="100x40">100x40 mm</option>
                            <option value="150x40">150x40 mm</option>
                            <option value="100x60">100x60 mm</option>
                            <option value="150x60">150x60 mm</option>
                            <option value="200x60">200x60 mm</option>
                            <option value="250x60">250x60 mm</option>
                            <option value="300x60">300x60 mm</option>
                        </select>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 10px;">
                    <button id="calculate"><i>üßÆ</i> HESAPLA VE Dƒ∞Z</button>
                </div>
            </div>
            
            <div class="panel">
                <div class="panel-title">
                    <i>üîç</i> Sonu√ßlar ve G√∂rselle≈ütirme
                </div>
                
                <div class="result-section">
                    <div class="result-grid">
                        <div class="result-card">
                            <h3>Gerekli Kanal Alanƒ±</h3>
                            <div class="result-value">-</div>
                        </div>
                        <div class="result-card">
                            <h3>Se√ßilen Kanal</h3>
                            <div class="result-value">-</div>
                        </div>
                        <div class="result-card">
                            <h3>Doluluk Oranƒ±</h3>
                            <div class="result-value">-</div>
                        </div>
                        <div class="result-card">
                            <h3>Kablo Sayƒ±sƒ±</h3>
                            <div class="result-value">-</div>
                        </div>
                    </div>
                    
                    <div id="visualization">
                        <div class="channel">
                            <div class="channel-grid"></div>
                        </div>
                    </div>
                    
                    <div id="info-message" class="message info-message"></div>
                    <div id="warning-message" class="message warning-message"></div>
                    
                    <div class="action-buttons">
                        <button id="export-pdf" class="pdf-button"><i>üìÑ</i> PDF RAPOR OLU≈ûTUR</button>
                        <button id="reset"><i>üîÑ</i> SIFIRLA</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="panel" style="margin: 20px;">
            <div class="panel-title">
                <i>üìä</i> Detaylƒ± Kablo Listesi
            </div>
            
            <div class="table-container">
                <table id="cable-table">
                    <thead>
                        <tr>
                            <th>Kablo Tipi</th>
                            <th>√áap (mm)</th>
                            <th>Adet</th>
                            <th>Toplam Alan (mm¬≤)</th>
                            <th>Renk Kodu</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Kablo listesi buraya eklenecek -->
                    </tbody>
                </table>
            </div>
            
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #007bff;"></div>
                    <span>B√ºy√ºk Kablolar (>15mm)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #28a745;"></div>
                    <span>Orta Kablolar (8-15mm)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #dc3545;"></div>
                    <span>K√º√ß√ºk Kablolar (<8mm)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #6f42c1;"></div>
                    <span>√ñzel Kablolar</span>
                </div>
            </div>
        </div>
        
        <div class="footer">
            ¬© SER Elektrik T√ºm haklarƒ± saklƒ±dƒ±r. | Mustafa √ñzt√ºrk
        </div>
    </div>

    <script>
        // Kablo veritabanƒ±
        const cableDatabase = {
            "3x2.5": { name: "NYY 3x2,5mm¬≤", diameter: 12, color: "#007bff" }, /* Teknik mavi */
            "4x2.5": { name: "NYY 4x2,5mm¬≤", diameter: 12.6, color: "#007bff" },
            "4x4": { name: "NYY 4x4mm¬≤", diameter: 14.8, color: "#007bff" },
            "4x6": { name: "NYY 4x6mm¬≤", diameter: 16, color: "#007bff" },
            "4x10": { name: "NYY 4x10mm¬≤", diameter: 18, color: "#007bff" },
            "4x16": { name: "NYY 4x16mm¬≤", diameter: 21.5, color: "#007bff" },
            "3x16+10": { name: "NYY 3x16+10mm¬≤", diameter: 21.5, color: "#007bff" },
            "3x25+16": { name: "NYY 3x25+16mm¬≤", diameter: 25, color: "#007bff" },
            "3x35+16": { name: "NYY 3x35+16mm¬≤", diameter: 27, color: "#007bff" },
            "3x50+25": { name: "NYY 3x50+25mm¬≤", diameter: 31, color: "#007bff" },
            
            "2x0.75": { name: "YSLY 2x0,75mm¬≤", diameter: 5.5, color: "#dc3545" }, /* Kƒ±rmƒ±zƒ± */
            "3x0.75": { name: "YSLY 3x0,75mm¬≤", diameter: 6, color: "#dc3545" },
            "4x0.75": { name: "YSLY 4x0,75mm¬≤", diameter: 6.5, color: "#dc3545" },
            "5x0.75": { name: "YSLY 5x0,75mm¬≤", diameter: 7.3, color: "#dc3545" },
            "6x0.75": { name: "YSLY 6x0,75mm¬≤", diameter: 7.9, color: "#dc3545" },
            "12x0.75": { name: "YSLY 12x0,75mm¬≤", diameter: 10.5, color: "#28a745" }, /* Ye≈üil */
            "18x0.75": { name: "YSLY 18x0,75mm¬≤", diameter: 12.3, color: "#28a745" },
            
            "liyc_2x0.75": { name: "LIYCY 2x0,75mm¬≤", diameter: 5.4, color: "#6f42c1" }, /* Mor */
            "liyc_4x0.75": { name: "LIYCY 4x0,75mm¬≤", diameter: 6.1, color: "#6f42c1" },
            "liyc_8x0.75": { name: "LIYCY 8x0,75mm¬≤", diameter: 8.1, color: "#6f42c1" },
            "liyc_12x0.75": { name: "LIYCY 12x0,75mm¬≤", diameter: 9.4, color: "#6f42c1" }
        };

        /**
         * Kablolarƒ± kanal i√ßinde fizik kurallarƒ±na (yer√ßekimi) uygun ≈üekilde yerle≈ütirir.
         * Kablolar, kanalƒ±n en altƒ±ndan ba≈ülayarak, altlarƒ±ndaki diƒüer kablolarƒ±n veya kanal tabanƒ±nƒ±n √ºzerine yerle≈üir.
         * @param {Array<Object>} cables - Yerle≈ütirilecek kablo nesnelerinin listesi. Her nesne { diameter, color } i√ßermelidir.
         * @param {number} channelWidth - Kanalƒ±n ger√ßek geni≈üliƒüi (mm).
         * @param {number} channelHeight - Kanalƒ±n ger√ßek y√ºksekliƒüi (mm).
         * @param {number} scale - G√∂rselle≈ütirme i√ßin kullanƒ±lan √∂l√ßek fakt√∂r√º (piksel/mm).
         */
        function placeCables(cables, channelWidth, channelHeight, scale) {
            const visualization = document.getElementById('visualization');
            const channel = visualization.querySelector('.channel');
            channel.innerHTML = '<div class="channel-grid"></div>'; // Izgarayƒ± sƒ±fƒ±rla

            // Kanal div'inin ger√ßek piksel boyutlarƒ±nƒ± al
            const actualChannelWidthPx = channel.clientWidth;
            const actualChannelHeightPx = channel.clientHeight;

            // Kablolarƒ± √ßapa g√∂re b√ºy√ºkten k√º√ß√ºƒüe sƒ±rala (daha iyi paketleme i√ßin)
            cables.sort((a, b) => b.diameter - a.diameter);

            let placedCables = []; // Ba≈üarƒ±lƒ± bir ≈üekilde yerle≈ütirilen kablolarƒ±n listesi

            // Her bir kabloyu yerle≈ütirmeye √ßalƒ±≈ü
            cables.forEach(cable => {
                const r = (cable.diameter * scale) / 2; // Kablonun √∂l√ßeklendirilmi≈ü yarƒ±√ßapƒ±
                let bestY = -1; // Kablonun merkezi i√ßin en iyi Y koordinatƒ± (kanalƒ±n altƒ±ndan √∂l√ß√ºl√ºr)
                let bestX = -1; // Kablonun merkezi i√ßin en iyi X koordinatƒ±

                // Kanal geni≈üliƒüi boyunca uygun bir yer bulmaya √ßalƒ±≈ü
                for (let x = r; x <= actualChannelWidthPx - r; x += 1) { // 1 piksellik adƒ±mlarla tara
                    let y = r; // Kablonun merkezi i√ßin ba≈ülangƒ±√ß Y pozisyonu (kanalƒ±n tabanƒ±ndan).

                    let stable = false; // Kablonun stabil bir yere oturup oturmadƒ±ƒüƒ±nƒ± kontrol eder

                    while (!stable && y <= actualChannelHeightPx - r) {
                        stable = true; // Varsayƒ±lan olarak stabil kabul et

                        // Daha √∂nce yerle≈ütirilmi≈ü t√ºm kablolar ile √ßarpƒ±≈ümayƒ± kontrol et
                        for (let placed of placedCables) {
                            const dx = x - placed.x; // X eksenindeki fark
                            const dy = y - placed.y; // Y eksenindeki fark
                            const dist = Math.sqrt(dx * dx + dy * dy); // Merkezler arasƒ± mesafe

                            if (dist < r + placed.r - 0.5) { // √áarpƒ±≈üma var, kabloyu yukarƒ± kaydƒ±r
                                y = placed.y + Math.sqrt(Math.max(0, (r + placed.r) ** 2 - dx ** 2));
                                stable = false; // Kablo hala stabil deƒüil, tekrar kontrol et
                                break; // Diƒüer yerle≈ütirilmi≈ü kablolarƒ± kontrol etmeye gerek yok, pozisyon deƒüi≈üti
                            }
                        }
                        // Eƒüer kablonun alt kenarƒ± kanalƒ±n tabanƒ±ndan daha a≈üaƒüƒ± d√º≈ümeye √ßalƒ±≈üƒ±yorsa, tabana oturt.
                        if (y < r) {
                            y = r;
                            stable = false;
                        }
                    }

                    // Eƒüer kablo kanalƒ±n y√ºksekliƒüi i√ßinde kalƒ±yorsa ve bu pozisyon daha iyiyse kaydet
                    if (y + r <= actualChannelHeightPx) {
                        if (bestY === -1 || y < bestY) {
                            bestY = y;
                            bestX = x;
                        }
                    }
                }

                // Eƒüer kablo i√ßin uygun bir yer bulunduysa, yerle≈ütirilen kablolar listesine ekle
                if (bestX !== -1) {
                    placedCables.push({
                        x: bestX,
                        y: bestY,
                        r: r,
                        color: cable.color,
                        diameter: cable.diameter // Store original diameter for display
                    });
                }
            });

            // Yerle≈ütirilen kablolarƒ± √ßiz
            placedCables.forEach(cable => {
                const div = document.createElement('div');
                div.className = 'cable';
                const diameterPx = cable.r * 2; // √áap = 2 * yarƒ±√ßap

                // CSS 'left' ve 'top' deƒüerleri, kablonun sol √ºst k√∂≈üesinden √∂l√ß√ºl√ºr.
                // 'cable.x' ve 'cable.y' kablonun merkezidir.
                // 'cable.x - cable.r' sol kenarƒ± verir.
                // 'actualChannelHeightPx - (cable.y + cable.r)' alt kenarƒ± kanalƒ±n tabanƒ±na oturtur.
                let left = cable.x - cable.r;
                let top = actualChannelHeightPx - (cable.y + cable.r);

                // G√∂rsel sƒ±nƒ±rlarƒ± i√ßinde kalmasƒ±nƒ± saƒüla
                left = Math.max(0, Math.min(actualChannelWidthPx - diameterPx, left));
                top = Math.max(0, Math.min(actualChannelHeightPx - diameterPx, top));

                div.style.width = `${diameterPx}px`;
                div.style.height = `${diameterPx}px`;
                div.style.left = `${left}px`;
                div.style.top = `${top}px`;
                div.style.backgroundColor = cable.color;
                div.textContent = `${(cable.diameter / scale).toFixed(0)}mm`; // Ger√ßek √ßapƒ± g√∂ster
                channel.appendChild(div);
            });

            // Kalan kablolar i√ßin uyarƒ±
            const totalRequestedCables = cables.length;
            if (placedCables.length < totalRequestedCables) {
                const warningMessage = document.getElementById('warning-message');
                warningMessage.style.display = 'block';
                warningMessage.textContent = `Uyarƒ±: ${totalRequestedCables - placedCables.length} kablo kanala sƒ±ƒümadƒ±. Daha b√ºy√ºk bir kanal se√ßin.`;
            } else {
                document.getElementById('warning-message').style.display = 'none';
            }

            // √ñl√ß√º √ßizgileri ekle
            addDimensionLines(channelWidth, channelHeight, scale);
        }
        
        /**
         * Kanalƒ±n geni≈ülik ve y√ºkseklik √∂l√ß√º √ßizgilerini g√∂rselle≈ütirme alanƒ±na ekler.
         * @param {number} width - Kanalƒ±n ger√ßek geni≈üliƒüi (mm).
         * @param {number} height - Kanalƒ±n ger√ßek y√ºksekliƒüi (mm).
         * @param {number} scale - G√∂rselle≈ütirme i√ßin kullanƒ±lan √∂l√ßek fakt√∂r√º (piksel/mm).
         */
        function addDimensionLines(width, height, scale) {
            const channel = document.querySelector('.channel');
            const offset = 20; // Kanal kenarƒ±ndan uzaklƒ±k
            
            // √ñnceki √∂l√ß√º √ßizgilerini temizle
            channel.querySelectorAll('.dimension-line, .dimension-end, .dimension-label').forEach(el => el.remove());

            // Yatay √ßizgi (geni≈ülik)
            const hLine = document.createElement('div');
            hLine.className = 'dimension-line horizontal-line';
            hLine.style.width = `${width * scale}px`;
            hLine.style.top = `-${offset}px`;
            hLine.style.left = '0';
            channel.appendChild(hLine);
            
            // Yatay √ßizgi u√ßlarƒ±
            const hEnd1 = document.createElement('div');
            hEnd1.className = 'dimension-end';
            hEnd1.style.left = '0';
            hEnd1.style.top = `-${offset}px`;
            channel.appendChild(hEnd1);
            
            const hEnd2 = document.createElement('div');
            hEnd2.className = 'dimension-end';
            hEnd2.style.right = '0';
            hEnd2.style.top = `-${offset}px`;
            channel.appendChild(hEnd2);
            
            // Yatay √∂l√ß√º etiketi
            const hLabel = document.createElement('div');
            hLabel.className = 'dimension-label';
            hLabel.textContent = `${width} mm`;
            hLabel.style.top = `-${offset + 10}px`;
            hLabel.style.left = '50%';
            hLabel.style.transform = 'translateX(-50%)';
            channel.appendChild(hLabel);
            
            // Dikey √ßizgi (y√ºkseklik)
            const vLine = document.createElement('div');
            vLine.className = 'dimension-line vertical-line';
            vLine.style.height = `${height * scale}px`;
            vLine.style.left = `-${offset}px`;
            vLine.style.top = '0';
            channel.appendChild(vLine);
            
            // Dikey √ßizgi u√ßlarƒ±
            const vEnd1 = document.createElement('div');
            vEnd1.className = 'dimension-end';
            vEnd1.style.left = `-${offset}px`;
            vEnd1.style.top = '0';
            channel.appendChild(vEnd1);
            
            const vEnd2 = document.createElement('div');
            vEnd2.className = 'dimension-end';
            vEnd2.style.left = `-${offset}px`;
            vEnd2.style.bottom = '0';
            channel.appendChild(vEnd2);
            
            // Dikey √∂l√ß√º etiketi
            const vLabel = document.createElement('div');
            vLabel.className = 'dimension-label';
            vLabel.textContent = `${height} mm`;
            vLabel.style.left = `-${offset + 10}px`;
            vLabel.style.top = '50%';
            vLabel.style.transform = 'translateY(-50%) rotate(-90deg)';
            channel.appendChild(vLabel);
        }
        
        // Hesaplama fonksiyonu
        function calculate() {
            const cableSelects = document.querySelectorAll('.cable-type');
            const cableCounts = document.querySelectorAll('.cable-count');
            const fillFactor = parseFloat(document.getElementById('fill-factor').value) / 100;
            const channelSize = document.getElementById('channel-size').value.split('x');
            const channelWidth = parseInt(channelSize[0]);
            const channelHeight = parseInt(channelSize[1]);
            
            let cables = [];
            let totalArea = 0;
            let maxCableDiameter = 0;
            let cableCount = 0;
            
            // Kablolarƒ± topla
            cableSelects.forEach((select, index) => {
                if (select.value) {
                    const diameter = parseFloat(select.selectedOptions[0].getAttribute('data-diameter'));
                    const count = parseInt(cableCounts[index].value) || 1;
                    const area = Math.PI * Math.pow(diameter/2, 2) * count;
                    
                    cables.push({
                        id: select.value,
                        name: cableDatabase[select.value].name,
                        diameter: diameter,
                        color: cableDatabase[select.value].color,
                        count: count,
                        area: area
                    });
                    
                    totalArea += area;
                    cableCount += count;
                    
                    // En b√ºy√ºk kablo √ßapƒ±nƒ± bul
                    if (diameter > maxCableDiameter) {
                        maxCableDiameter = diameter;
                    }
                }
            });
            
            if (cables.length === 0) {
                // √ñzel bir modal veya mesaj kutusu kullanƒ±n, alert() kullanmayƒ±n
                const warningMessage = document.getElementById('warning-message');
                warningMessage.style.display = 'block';
                warningMessage.textContent = "L√ºtfen en az bir kablo tipi se√ßin!";
                return;
            }
            
            // Gerekli kanal alanƒ±nƒ± hesapla
            const requiredArea = totalArea / fillFactor;
            const actualArea = channelWidth * channelHeight;
            const actualFillFactor = (totalArea / actualArea) * 100;
            
            // Sonu√ßlarƒ± g√ºncelle
            document.querySelectorAll('.result-value')[0].textContent = `${Math.ceil(requiredArea)} mm¬≤`;
            document.querySelectorAll('.result-value')[1].textContent = `${channelWidth}x${channelHeight} mm`;
            document.querySelectorAll('.result-value')[2].textContent = `${actualFillFactor.toFixed(1)}%`;
            document.querySelectorAll('.result-value')[3].textContent = cableCount;
            
            // Kablo tablosunu g√ºncelle
            const tableBody = document.querySelector('#cable-table tbody');
            tableBody.innerHTML = '';
            
            cables.forEach(cable => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><span class="cable-color" style="background:${cable.color}"></span> ${cable.name}</td>
                    <td>${cable.diameter}</td>
                    <td>${cable.count}</td>
                    <td>${cable.area.toFixed(2)}</td>
                    <td><span style="color:${cable.color}">${cable.color.toUpperCase()}</span></td>
                `;
                tableBody.appendChild(row);
            });
            
            // Kablolarƒ± yerle≈ütir
            const visualization = document.getElementById('visualization');
            // Kanalƒ±n kenar bo≈üluklarƒ±nƒ± hesaba kat
            const channelPadding = 40; // 20px sol + 20px saƒü
            const scale = Math.min(
                (visualization.offsetWidth - channelPadding) / channelWidth,
                (visualization.offsetHeight - channelPadding) / channelHeight
            );
            
            // Tek tek kablolarƒ± olu≈ütur
            let allCables = [];
            cables.forEach(cable => {
                for (let i = 0; i < cable.count; i++) {
                    allCables.push({
                        name: cable.name,
                        diameter: cable.diameter,
                        color: cable.color
                    });
                }
            });
            
            placeCables(allCables, channelWidth, channelHeight, scale);
            
            // Bilgi mesajƒ±
            if (actualFillFactor > fillFactor * 100) {
                const infoMessage = document.getElementById('info-message');
                infoMessage.style.display = 'block';
                infoMessage.textContent = `Dikkat: Doluluk oranƒ± %${(fillFactor*100).toFixed(0)}'den y√ºksek (%${actualFillFactor.toFixed(1)}). Daha b√ºy√ºk bir kanal se√ßmeniz √∂nerilir.`;
            } else {
                document.getElementById('info-message').style.display = 'none';
            }
        }
        
        // PDF i√ßin T√ºrk√ße destekli font'u base64 olarak g√∂mmeniz lazƒ±m.
        // √ñrnek: https://github.com/dejavu-fonts/dejavu/blob/master/ttf/DejaVuSans.ttf indirip base64'e √ßevirin:
        // Linux/Mac: base64 DejaVuSans.ttf | tr -d '\\n' > font.txt
        // Ardƒ±ndan font.txt i√ßeriƒüini a≈üaƒüƒ±ya yapƒ±≈ütƒ±rƒ±n.
        // √ñNEMLƒ∞: Bu deƒüi≈ükeni ger√ßek Base64 string ile doldurmanƒ±z gerekmektedir.
        // Aksi takdirde, T√ºrk√ße karakterler d√ºzg√ºn g√∂r√ºnt√ºlenmeyebilir.
        const turkishFontBase64 = "BURAYA_DEJAVU_SANS_TTF_BASE64_STRING_GELECEK"; // √ñrnek uzun bir base64 string

        function loadTurkishFont(doc) {
            try {
                if (turkishFontBase64 && !turkishFontBase64.startsWith("BURAYA")) {
                    doc.addFileToVFS("DejaVuSans.ttf", turkishFontBase64);
                    doc.addFont("DejaVuSans.ttf", "DejaVuSans", "normal");
                    doc.setFont("DejaVuSans");
                } else {
                    // Placeholder bƒ±rakƒ±lmƒ±≈üsa veya bo≈üsa varsayƒ±lanla devam eder
                    console.warn("Turkish font Base64 string eksik veya hatalƒ±. Varsayƒ±lan 'helvetica' fontu kullanƒ±lacak. T√ºrk√ße karakterlerde sorun ya≈üanabilir.");
                    doc.setFont("helvetica");
                }
            } catch (e) {
                console.warn("Font y√ºklenirken bir hata olu≈ütu, varsayƒ±lan font kullanƒ±lacak.", e);
                doc.setFont("helvetica");
            }
        }

        // T√ºrk√ße karakterleri ƒ∞ngilizce e≈üdeƒüerlerine √ßeviren yardƒ±mcƒ± fonksiyon
        function convertToEnglishChars(text) {
            if (typeof text !== 'string') return text;
            return text
                .replace(/ƒ∞/g, 'I')
                .replace(/ƒ±/g, 'i')
                .replace(/ƒû/g, 'G')
                .replace(/ƒü/g, 'g')
                .replace(/√ú/g, 'U')
                .replace(/√º/g, 'u')
                .replace(/≈û/g, 'S')
                .replace(/≈ü/g, 's')
                .replace(/√ñ/g, 'O')
                .replace(/√∂/g, 'o')
                .replace(/√á/g, 'C')
                .replace(/√ß/g, 'c');
        }

        // PDF olu≈üturma fonksiyonu
        function exportToPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            loadTurkishFont(doc); // Fontu y√ºkle
            
            // Ba≈ülƒ±k
            doc.setFontSize(18);
            doc.setTextColor(30, 50, 80);
            doc.text(convertToEnglishChars('KABLO KANALI HESAP RAPORU'), 105, 20, { align: 'center' });
            
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text(convertToEnglishChars(`Olu≈üturulma Tarihi: ${new Date().toLocaleDateString('tr-TR')}`), 105, 26, { align: 'center' });
            
            // Sonu√ßlar
            doc.setFontSize(14);
            doc.setTextColor(30, 50, 80);
            doc.text(convertToEnglishChars('Hesaplama Sonu√ßlarƒ±'), 20, 35);
            
            doc.setFontSize(10);
            let y = 43; // Ba≈ülangƒ±√ß Y pozisyonu
            const results = [
                [`Gerekli Kanal Alanƒ±`, document.querySelectorAll('.result-value')[0].textContent],
                [`Se√ßilen Kanal`, document.querySelectorAll('.result-value')[1].textContent],
                [`Doluluk Oranƒ±`, document.querySelectorAll('.result-value')[2].textContent],
                [`Toplam Kablo Sayƒ±sƒ±`, document.querySelectorAll('.result-value')[3].textContent]
            ];
            
            results.forEach(([label, value]) => {
                doc.setTextColor(0, 0, 0);
                doc.text(convertToEnglishChars(`${label}:`), 25, y);
                doc.setTextColor(0, 123, 255); /* Teknik mavi */
                doc.text(convertToEnglishChars(value), 80, y); // Deƒüerin ba≈ülangƒ±√ß pozisyonunu ayarla
                y += 7; // Her satƒ±r arasƒ±nda daha fazla bo≈üluk
            });
            
            // Kablo listesi
            doc.setFontSize(12);
            doc.setTextColor(30, 50, 80);
            doc.text(convertToEnglishChars('Kablo Listesi'), 20, y + 10); // Tablo ba≈ülƒ±ƒüƒ± ile sonu√ßlar arasƒ±na daha fazla bo≈üluk
            
            const headers = ['Kablo Tipi', 'Cap (mm)', 'Adet', 'Alan (mm2)'].map(convertToEnglishChars); // Ba≈ülƒ±klarƒ± da √ßevir
            const rows = [];
            
            document.querySelectorAll('#cable-table tbody tr').forEach(row => {
                const cells = Array.from(row.querySelectorAll('td')).slice(0, 4);
                rows.push(cells.map(cell => convertToEnglishChars(cell.textContent.trim()))); // H√ºcre i√ßeriklerini de √ßevir
            });
            
            doc.autoTable({
                startY: y + 14, // Tablonun ba≈ülangƒ±√ß Y pozisyonunu ayarla
                head: [headers],
                body: rows,
                theme: 'grid',
                headStyles: { fillColor: [30, 50, 80], textColor: 255 },
                styles: { font: doc.getFont().fontName, fontSize: 9, cellPadding: 2 }, // Fontu ve h√ºcre dolgusunu ayarla
                columnStyles: {
                    0: { cellWidth: 60 },
                    1: { cellWidth: 25 },
                    2: { cellWidth: 20 },
                    3: { cellWidth: 30 }
                },
                margin: { left: 15, right: 15 }
            });
            
            // G√∂rselle≈ütirme
            html2canvas(document.getElementById('visualization'), { scale: 2 }).then(canvas => { // scale: 2 eklendi
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = 150;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                const pageHeight = doc.internal.pageSize.getHeight();
                
                let imgY = doc.autoTable.previous ? doc.autoTable.previous.finalY + 10 : y + 30; // Tablo sonrasƒ± veya sonu√ßlar sonrasƒ± konum
                if (imgY + imgHeight > pageHeight - 20) {
                    doc.addPage();
                    imgY = 20;
                }
                
                doc.addImage(imgData, 'PNG', 30, imgY, imgWidth, imgHeight);
                // Dipnot
                doc.setFontSize(8);
                doc.setTextColor(100, 100, 100);
                doc.text(convertToEnglishChars('¬© SER Elektrik T√ºm haklarƒ± saklƒ±dƒ±r. | Mustafa √ñzt√ºrk'), 105, 290, { align: 'center' });
                
                // PDF'i indir
                doc.save(`kablo-kanali-raporu-${new Date().toISOString().slice(0, 10)}.pdf`);
            });
        }
        
        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', function() {
            // Kablo ekleme butonu
            document.getElementById('add-cable').addEventListener('click', function() {
                const container = document.getElementById('cable-inputs-container');
                const div = document.createElement('div');
                div.className = 'cable-inputs';
                div.innerHTML = `
                    <label class="cable-type-label">Kablo Tipi:</label>
                    <select class="cable-type">
                        <option value="">-- Kablo Tipi Se√ßin --</option>
                        <optgroup label="NYY Kablo">
                            <option value="3x2.5" data-diameter="12">3x2,5mm¬≤ (√ò12mm)</option>
                            <option value="4x2.5" data-diameter="12.6">4x2,5mm¬≤ (√ò12.6mm)</option>
                            <option value="4x4" data-diameter="14.8">4x4mm¬≤ (√ò14.8mm)</option>
                            <option value="4x6" data-diameter="16">4x6mm¬≤ (√ò16mm)</option>
                            <option value="4x10" data-diameter="18">4x10mm¬≤ (√ò18mm)</option>
                            <option value="4x16" data-diameter="21.5">4x16mm¬≤ (√ò21.5mm)</option>
                            <option value="3x16+10" data-diameter="21.5">3x16+10mm¬≤ (√ò21.5mm)</option>
                            <option value="3x25+16" data-diameter="25">3x25+16mm¬≤ (√ò25mm)</option>
                            <option value="3x35+16" data-diameter="27">3x35+16mm¬≤ (√ò27mm)</option>
                            <option value="3x50+25" data-diameter="31">3x50+25mm¬≤ (√ò31mm)</option>
                        </optgroup>
                        <optgroup label="YSLY Kablo">
                            <option value="2x0.75" data-diameter="5.5">2x0,75mm¬≤ (√ò5.5mm)</option>
                            <option value="3x0.75" data-diameter="6">3x0,75mm¬≤ (√ò6mm)</option>
                            <option value="4x0.75" data-diameter="6.5">4x0,75mm¬≤ (√ò6.5mm)</option>
                            <option value="5x0.75" data-diameter="7.3">5x0,75mm¬≤ (√ò7.3mm)</option>
                            <option value="6x0.75" data-diameter="7.9">6x0,75mm¬≤ (√ò7.9mm)</option>
                            <option value="12x0.75" data-diameter="10.5">12x0,75mm¬≤ (√ò10.5mm)</option>
                            <option value="18x0.75" data-diameter="12.3">18x0,75mm¬≤ (√ò12.3mm)</option>
                        </optgroup>
                        <optgroup label="LIYCY Kablo">
                            <option value="liyc_2x0.75" data-diameter="5.4">2x0,75mm¬≤ (√ò5.4mm)</option>
                            <option value="liyc_4x0.75" data-diameter="6.1">4x0,75mm¬≤ (√ò6.1mm)</option>
                            <option value="liyc_8x0.75" data-diameter="8.1">8x0,75mm¬≤ (√ò8.1mm)</option>
                            <option value="liyc_12x0.75" data-diameter="9.4">12x0,75mm¬≤ (√ò9.4mm)</option>
                        </optgroup>
                    </select>
                    
                    <label class="cable-type-label">Adet:</label>
                    <input type="number" class="cable-count" value="1" min="1" max="20" placeholder="Adet">
                    
                    <button class="remove-cable">√ó</button>
                `;
                container.appendChild(div);
            });
            
            // Sil butonlarƒ± i√ßin event delegation
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('remove-cable')) {
                    const inputs = document.querySelectorAll('.cable-inputs');
                    if (inputs.length > 1) {
                        e.target.closest('.cable-inputs').remove();
                    } else {
                        // √ñzel bir modal veya mesaj kutusu kullanƒ±n, alert() kullanmayƒ±n
                        const warningMessage = document.getElementById('warning-message');
                        warningMessage.style.display = 'block';
                        warningMessage.textContent = "En az bir kablo giri≈üi olmalƒ±dƒ±r!";
                    }
                }
            });
            
            // Hesapla butonu
            document.getElementById('calculate').addEventListener('click', calculate);
            
            // PDF olu≈ütur butonu
            document.getElementById('export-pdf').addEventListener('click', exportToPDF);
            
            // Sƒ±fƒ±rla butonu
            document.getElementById('reset').addEventListener('click', function() {
                const container = document.getElementById('cable-inputs-container');
                container.innerHTML = '';
                
                // ƒ∞lk kablo giri≈üini ekle
                const div = document.createElement('div');
                div.className = 'cable-inputs';
                div.innerHTML = `
                    <label class="cable-type-label">Kablo Tipi:</label>
                    <select class="cable-type">
                        <option value="">-- Kablo Tipi Se√ßin --</option>
                        <optgroup label="NYY Kablo">
                            <option value="3x2.5" data-diameter="12">3x2,5mm¬≤ (√ò12mm)</option>
                            <option value="4x2.5" data-diameter="12.6">4x2,5mm¬≤ (√ò12.6mm)</option>
                            <option value="4x4" data-diameter="14.8">4x4mm¬≤ (√ò14.8mm)</option>
                            <option value="4x6" data-diameter="16">4x6mm¬≤ (√ò16mm)</option>
                            <option value="4x10" data-diameter="18">4x10mm¬≤ (√ò18mm)</option>
                            <option value="4x16" data-diameter="21.5">4x16mm¬≤ (√ò21.5mm)</option>
                            <option value="3x16+10" data-diameter="21.5">3x16+10mm¬≤ (√ò21.5mm)</option>
                            <option value="3x25+16" data-diameter="25">3x25+16mm¬≤ (√ò25mm)</option>
                            <option value="3x35+16" data-diameter="27">3x35+16mm¬≤ (√ò27mm)</option>
                            <option value="3x50+25" data-diameter="31">3x50+25mm¬≤ (√ò31mm)</option>
                        </optgroup>
                        <optgroup label="YSLY Kablo">
                            <option value="2x0.75" data-diameter="5.5">2x0,75mm¬≤ (√ò5.5mm)</option>
                            <option value="3x0.75" data-diameter="6">3x0,75mm¬≤ (√ò6mm)</option>
                            <option value="4x0.75" data-diameter="6.5">4x0,75mm¬≤ (√ò6.5mm)</option>
                            <option value="5x0.75" data-diameter="7.3">5x0,75mm¬≤ (√ò7.3mm)</option>
                            <option value="6x0.75" data-diameter="7.9">6x0,75mm¬≤ (√ò7.9mm)</option>
                            <option value="12x0.75" data-diameter="10.5">12x0,75mm¬≤ (√ò10.5mm)</option>
                            <option value="18x0.75" data-diameter="12.3">18x0,75mm¬≤ (√ò12.3mm)</option>
                        </optgroup>
                        <optgroup label="LIYCY Kablo">
                            <option value="liyc_2x0.75" data-diameter="5.4">2x0,75mm¬≤ (√ò5.4mm)</option>
                            <option value="liyc_4x0.75" data-diameter="6.1">4x0,75mm¬≤ (√ò6.1mm)</option>
                            <option value="liyc_8x0.75" data-diameter="8.1">8x0,75mm¬≤ (√ò8.1mm)</option>
                            <option value="liyc_12x0.75" data-diameter="9.4">12x0,75mm¬≤ (√ò9.4mm)</option>
                        </optgroup>
                    </select>
                    
                    <label class="cable-type-label">Adet:</label>
                    <input type="number" class="cable-count" value="1" min="1" max="20" placeholder="Adet">
                    
                    <button class="remove-cable">√ó</button>
                `;
                container.appendChild(div);
                
                // Diƒüer alanlarƒ± sƒ±fƒ±rla
                document.getElementById('fill-factor').value = 40;
                document.getElementById('channel-size').value = '100x40';
                
                // Sonu√ßlarƒ± sƒ±fƒ±rla
                document.querySelectorAll('.result-value').forEach(el => {
                    el.textContent = '-';
                });
                
                // Tabloyu sƒ±fƒ±rla
                document.querySelector('#cable-table tbody').innerHTML = '';
                
                // Mesajlarƒ± kaldƒ±r
                document.getElementById('info-message').style.display = 'none';
                document.getElementById('warning-message').style.display = 'none';
                
                // G√∂rselle≈ütirmeyi sƒ±fƒ±rla
                const channel = document.querySelector('.channel');
                channel.innerHTML = '<div class="channel-grid"></div>';
            });
        });
    </script>
</body>
</html>